<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="This function validate a constructed GP, DGP, or linked (D)GP emulator via the Leave-One-Out (LOO)
cross validation or Out-Of-Sample (OOS) validation."><title>Validate a constructed GP, DGP, or linked (D)GP emulator — validate • dgpsi</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Validate a constructed GP, DGP, or linked (D)GP emulator — validate"><meta property="og:description" content="This function validate a constructed GP, DGP, or linked (D)GP emulator via the Leave-One-Out (LOO)
cross validation or Out-Of-Sample (OOS) validation."><meta name="robots" content="noindex"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">dgpsi</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">2.4.0-9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/dgpsi.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/motorcycle.html">DGP Emulation with the Heteroskedastic Gaussian Likelihood
</a>
    <a class="dropdown-item" href="../articles/linked_DGP.html">Linked (D)GP Emulation</a>
    <a class="dropdown-item" href="../articles/seq_design.html">Sequential Design I</a>
    <a class="dropdown-item" href="../articles/seq_design_2.html">Sequential Design II</a>
    <a class="dropdown-item" href="../articles/large_scale_emulation.html">Large-scale DGP Emulation
</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/mingdeyu/dgpsi-R/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Validate a constructed GP, DGP, or linked (D)GP emulator</h1>
      <small class="dont-index">Source: <a href="https://github.com/mingdeyu/dgpsi-R/blob/HEAD/R/validation.R" class="external-link"><code>R/validation.R</code></a></small>
      <div class="d-none name"><code>validate.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function validate a constructed GP, DGP, or linked (D)GP emulator via the Leave-One-Out (LOO)
cross validation or Out-Of-Sample (OOS) validation.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">validate</span><span class="op">(</span><span class="va">object</span>, <span class="va">x_test</span>, <span class="va">y_test</span>, <span class="va">method</span>, <span class="va">verb</span>, <span class="va">M</span>, <span class="va">force</span>, <span class="va">cores</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for gp</span></span>
<span><span class="fu">validate</span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  x_test <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  y_test <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"mean_var"</span>,</span>
<span>  verb <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  M <span class="op">=</span> <span class="fl">50</span>,</span>
<span>  force <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  cores <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for dgp</span></span>
<span><span class="fu">validate</span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  x_test <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  y_test <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"mean_var"</span>,</span>
<span>  verb <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  M <span class="op">=</span> <span class="fl">50</span>,</span>
<span>  force <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  cores <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for lgp</span></span>
<span><span class="fu">validate</span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  x_test <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  y_test <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"mean_var"</span>,</span>
<span>  verb <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  M <span class="op">=</span> <span class="fl">50</span>,</span>
<span>  force <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  cores <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>object</dt>
<dd><p>can be one of the following:</p><ul><li><p>the S3 class <code>gp</code>.</p></li>
<li><p>the S3 class <code>dgp</code>.</p></li>
<li><p>the S3 class <code>lgp</code>.</p></li>
</ul></dd>


<dt>x_test</dt>
<dd><p>the OOS testing input data:</p><ul><li><p>if <code>x</code> is an instance of the <code>gp</code> or <code>dgp</code> class, <code>x_test</code> is a matrix where each row is an input testing data point and each column is an input dimension.</p></li>
<li><p>if <code>x</code> is an instance of the <code>lgp</code> class, <code>x_test</code> can be a matrix or a list:</p><ul><li><p>if <code>x_test</code> is a matrix, it is the global testing input data that feed into the emulators in the first layer of a system.
The rows of <code>x_test</code> represent different input data points and the columns represent input dimensions across all emulators in
the first layer of the system. In this case, it is assumed that the only global input to the system is the input to the
emulators in the first layer and there is no global input to emulators in other layers.</p></li>
<li><p>if <code>x_test</code> is a list, it should have <em>L</em> (the number of layers in an emulator system) elements. The first element
is a matrix that represents the global testing input data that feed into the emulators in the first layer of the system. The
remaining <em>L-1</em> elements are <em>L-1</em> sub-lists, each of which contains a number (the same number of emulators in
the corresponding layer) of matrices (rows being testing input data points and columns being input dimensions) that represent the
global testing input data to the emulators in the corresponding layer. The matrices must be placed in the sub-lists based on how
their corresponding emulators are placed in <code>struc</code> argument of <code><a href="lgp.html">lgp()</a></code>. If there is no global input data to a certain emulator,
set <code>NULL</code> in the corresponding sub-list of <code>x_test</code>.</p></li>
</ul></li>
</ul><p><code>x_test</code> must be provided for the validation if <code>x</code> is an instance of the <code>lgp</code>. Defaults to <code>NULL</code>.</p></dd>


<dt>y_test</dt>
<dd><p>the OOS testing output data that correspond to <code>x_test</code>:</p><ul><li><p>if <code>x</code> is an instance of the <code>gp</code> class, <code>y_test</code> is a matrix with only one column and each row being an testing output data point.</p></li>
<li><p>if <code>x</code> is an instance of the <code>dgp</code> class, <code>y_test</code> is a matrix with its rows being testing output data points and columns being
output dimensions.</p></li>
<li><p>if <code>x</code> is an instance of the <code>lgp</code> class, <code>y_test</code> can be a single matrix or a list of matrices:</p><ul><li><p>if <code>y_test</code> is a single matrix, then there is only one emulator in the final layer of the linked emulator system and <code>y_test</code>
represents the emulator's output with rows being testing positions and columns being output dimensions.</p></li>
<li><p>if <code>y_test</code> is a list, then <code>y_test</code> should have <em>M</em> number (the same number of emulators in the final layer of the system) of matrices.
Each matrix has its rows corresponding to testing positions and columns corresponding to output dimensions of the associated emulator
in the final layer.</p></li>
</ul></li>
</ul><p><code>y_test</code> must be provided for the validation if <code>x</code> is an instance of the <code>lgp</code>. Defaults to <code>NULL</code>.</p></dd>


<dt>method</dt>
<dd><p>the prediction approach in validations: mean-variance (<code>"mean_var"</code>) or sampling (<code>"sampling"</code>) approach. Defaults to <code>"mean_var"</code>.</p></dd>


<dt>verb</dt>
<dd><p>a bool indicating if the trace information on validations will be printed during the function execution.
Defaults to <code>TRUE</code>.</p></dd>


<dt>M</dt>
<dd><p>the size of the conditioning set for the Vecchia approximation in the emulator validation. This argument is only used if the emulator <code>object</code>
was constructed under the Vecchia approximation. Defaults to <code>50</code>.</p></dd>


<dt>force</dt>
<dd><p>a bool indicating whether to force the LOO or OOS re-evaluation when <code>loo</code> or <code>oos</code> slot already exists in <code>object</code>. When <code>force = FALSE</code>,
<code>validate()</code> will try to determine automatically if the LOO or OOS re-evaluation is needed. Set <code>force</code> to <code>TRUE</code> when LOO or OOS re-evaluation
is required. Defaults to <code>FALSE</code>.</p></dd>


<dt>cores</dt>
<dd><p>the number of processes to be used for validations. If set to <code>NULL</code>, the number of processes is set to <code>max physical cores available %/% 2</code>.
Defaults to <code>1</code>.</p></dd>


<dt>...</dt>
<dd><p>N/A.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<ul><li><p>If <code>object</code> is an instance of the <code>gp</code> class, an updated <code>object</code> is returned with an additional slot called <code>loo</code> (for LOO cross validation) or
<code>oos</code> (for OOS validation) that contains:</p><ul><li><p>two slots called <code>x_train</code> (or <code>x_test</code>) and <code>y_train</code> (or <code>y_test</code>) that contain the validation data points for LOO (or OOS).</p></li>
<li><p>a column matrix called <code>mean</code>, if <code>method = "mean_var"</code>, or <code>median</code>, if <code>method = "sampling"</code>, that contains the predictive means or medians of the
GP emulator at validation positions.</p></li>
<li><p>three column matrices called <code>std</code>, <code>lower</code>, and <code>upper</code> that contain the predictive standard deviations and credible intervals of the
GP emulator at validation positions. If <code>method = "mean_var"</code>, the upper and lower bounds of a credible interval are two standard deviations above
and below the predictive mean. If <code>method = "sampling"</code>, the upper and lower bounds of a credible interval are 2.5th and 97.5th percentiles.</p></li>
<li><p>a numeric value called <code>rmse</code> that contains the root mean/median squared error of the GP emulator.</p></li>
<li><p>a numeric value called <code>nrmse</code> that contains the (min-max) normalized root mean/median squared error of the GP emulator. The min-max normalization
is based on the maximum and minimum values of the validation outputs contained in <code>y_train</code> (or <code>y_test</code>).</p></li>
<li><p>an integer called <code>M</code> that contains size of the conditioning set used for the Vecchia approximation, if used, in the emulator validation.</p></li>
</ul><p>The rows of matrices (<code>mean</code>, <code>median</code>, <code>std</code>, <code>lower</code>, and <code>upper</code>) correspond to the validation positions.</p></li>
<li><p>If <code>object</code> is an instance of the <code>dgp</code> class, an updated <code>object</code> is returned with an additional slot called <code>loo</code> (for LOO cross validation) or
<code>oos</code> (for OOS validation) that contains:</p><ul><li><p>two slots called <code>x_train</code> (or <code>x_test</code>) and <code>y_train</code> (or <code>y_test</code>) that contain the validation data points for LOO (or OOS).</p></li>
<li><p>a matrix called <code>mean</code>, if <code>method = "mean_var"</code>, or <code>median</code>, if <code>method = "sampling"</code>, that contains the predictive means or medians of the
DGP emulator at validation positions.</p></li>
<li><p>three matrices called <code>std</code>, <code>lower</code>, and <code>upper</code> that contain the predictive standard deviations and credible intervals of the
DGP emulator at validation positions. If <code>method = "mean_var"</code>, the upper and lower bounds of a credible interval are two standard deviations above
and below the predictive mean. If <code>method = "sampling"</code>, the upper and lower bounds of a credible interval are 2.5th and 97.5th percentiles.</p></li>
<li><p>a vector called <code>rmse</code> that contains the root mean/median squared errors of the DGP emulator across different output
dimensions.</p></li>
<li><p>a vector called <code>nrmse</code> that contains the (min-max) normalized root mean/median squared errors of the DGP emulator across different output
dimensions. The min-max normalization is based on the maximum and minimum values of the validation outputs contained in <code>y_train</code> (or <code>y_test</code>).</p></li>
<li><p>an integer called <code>M</code> that contains size of the conditioning set used for the Vecchia approximation, if used, in the emulator validation.</p></li>
</ul><p>The rows and columns of matrices (<code>mean</code>, <code>median</code>, <code>std</code>, <code>lower</code>, and <code>upper</code>) correspond to the validation positions and DGP emulator output
dimensions, respectively.</p></li>
<li><p>If <code>object</code> is an instance of the <code>lgp</code> class, an updated <code>object</code> is returned with an additional slot called <code>oos</code> (for OOS validation) that contains:</p><ul><li><p>two slots called <code>x_test</code> and <code>y_test</code> that contain the validation data points for OOS.</p></li>
<li><p>a list called <code>mean</code>, if <code>method = "mean_var"</code>, or <code>median</code>, if <code>method = "sampling"</code>, that contains the predictive means or medians of
the linked (D)GP emulator at validation positions.</p></li>
<li><p>three lists called <code>std</code>, <code>lower</code>, and <code>upper</code> that contain the predictive standard deviations and credible intervals of
the linked (D)GP emulator at validation positions. If <code>method = "mean_var"</code>, the upper and lower bounds of a credible interval are two standard
deviations above and below the predictive mean. If <code>method = "sampling"</code>, the upper and lower bounds of a credible interval are 2.5th and 97.5th percentiles.</p></li>
<li><p>a list called <code>rmse</code> that contains the root mean/median squared errors of the linked (D)GP emulator.</p></li>
<li><p>a list called <code>nrmse</code> that contains the (min-max) normalized root mean/median squared errors of the linked (D)GP emulator. The min-max normalization
is based on the maximum and minimum values of the validation outputs contained in <code>y_test</code>.</p></li>
<li><p>an integer called <code>M</code> that contains size of the conditioning set used for the Vecchia approximation, if used, in the emulator validation.</p></li>
</ul><p>Each element in <code>mean</code>, <code>median</code>, <code>std</code>, <code>lower</code>, <code>upper</code>, <code>rmse</code>, and <code>nrmse</code> corresponds to a (D)GP emulator in the final layer of the linked (D)GP
emulator.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>See further examples and tutorials at <a href="https://mingdeyu.github.io/dgpsi-R/" class="external-link">https://mingdeyu.github.io/dgpsi-R/</a>.</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    
<ul><li><p>When both <code>x_test</code> and <code>y_test</code> are <code>NULL</code>, the LOO cross validation will be implemented. Otherwise, OOS validation will
be implemented. The LOO validation is only applicable to a GP or DGP emulator (i.e., <code>x</code> is an instance of the <code>gp</code> or <code>dgp</code>
class). If a linked (D)GP emulator (i.e., <code>x</code> is an instance of the <code>lgp</code> class) is provided, <code>x_test</code> and <code>y_test</code> must
also be provided for OOS validation.</p></li>
<li><p>Any R vector detected in <code>x_test</code> and <code>y_test</code> will be treated as a column vector and automatically converted into a single-column
R matrix. Thus, if <code>x_test</code> or <code>y_test</code> is a single testing data point with multiple dimensions, it must be given as a matrix.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># See gp(), dgp(), or lgp() for an example.</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Deyu Ming, Daniel Williamson.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer></div>

  

  

  </body></html>

